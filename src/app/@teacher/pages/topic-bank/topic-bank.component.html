<div class="container">
  <div class="alert alert-dark" role="alert">
    <h2 class="display-4 title">Proyectos</h2>
  </div>
  <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
    <li [ngbNavItem]="1">
      <a ngbNavLink>Temas Pre-aprobados</a>
      <ng-template ngbNavContent>
        <div class="row my-3">
          <div class="col-10"></div>
          <div class="col-2">
            <app-tema-add></app-tema-add>
          </div>
        </div>
        <table class="table table-bordered mt-2">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Tema</th>
              <th scope="col">Fecha</th>
              <th scope="col">Carrera</th>
              <th scope="col">Opciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let tema of temas; index as i">
              <th scope="row">{{i + 1}}</th>
              <td>{{tema.tema}}</td>
              <td>{{tema.created_at | date:"dd/MM/yy"}}</td>
              <td>{{tema.carrera_id.carrera}}</td>
              <td>
                <button class="btn btn-primary" (click)="viewModalTema(tema.id)">
                  <i class="far fa-eye"></i>
                </button>
                <button class="btn btn-dark mx-1">
                  <i class=" fas fa-edit" (click)="editModalTema(tema.id)"></i>
                </button>
                <button class="btn btn-danger">
                  <i class="fas fa-trash-alt" (click)="deleteTema(tema.id)"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </ng-template>
    </li>
    <li [ngbNavItem]="2">
      <a ngbNavLink>Proyectos en curso</a>
      <ng-template ngbNavContent>
        <div class="row my-3">
          <div class="col-8"></div>
          <div class="col-4">
            <select class="form-select" id="estados" (change)="onChangeEstados($event)" name="estados">
              <option value="" selected disabled hidden>Busque por estado</option>
              <option value="todos">Todos</option>
              <option *ngFor="let estados of estados" value="{{estados.id}}">
                {{estados.nombre}}</option>
            </select>
          </div>
        </div>
        <div class="content border border-light">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Tema</th>
                <th scope="col">Estudiantes</th>
                <th scope="col">Asesor</th>
                <th scope="col">Estado</th>
                <th scope="col">Carrera</th>
                <th scope="col">Opciones</th>
              </tr>
            </thead>
            <tbody *ngIf="projects.length == 0">
              <td colspan="8" class="text-center">No hay registros...</td>
            </tbody>
            <tbody>
              <tr *ngFor="let project of projects; index as i">
                <th scope="row">{{i+1}}</th>
                <td>{{project.tema_id.tema}}</td>
                <td>
                  {{names[i]}}
                </td>
                <td>{{project.asesor_id.nombre}}</td>
                <td>{{project.estatus_id.nombre}}</td>
                <td>{{project.carrera_id.codigoCarrera}}</td>
                <td>
                  <button (click)="viewModal(project.id)" class="btn btn-primary mr-1">
                    <i class="far fa-eye"></i>
                  </button>
                  <button (click)="editarProyecto(project.id)" class="btn btn-success">
                    <i class="fas fa-edit"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>

        </div>
      </ng-template>
    </li>
    <li [ngbNavItem]="3">
      <a ngbNavLink>Proyecto Culminados</a>
      <ng-template ngbNavContent>
        <table class="table table-bordered mt-2">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Tema</th>
              <th scope="col">Carrera</th>
              <th scope="col">Estudiantes</th>
              <th scope="col">Fecha</th>
              <th scope="col">Estatus</th>
              <th scope="col">Opciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let solicitud of solicitudesCuliminadas; index as i">
              <th scope="row">{{i + 1}}</th>
              <td>{{solicitud.tema_id.tema}}</td>
              <td>{{solicitud.carrera_id.carrera}}</td>
              <td>{{namesCulimandos[i]}}</td>
              <td>{{solicitud.created_at | date:"dd/MM/yy"}}</td>
              <td>{{solicitud.estatus_id.nombre}}</td>
              <td>
                <button class="btn btn-primary" (click)="viewModal(solicitud.id)">
                  <i class="far fa-eye"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </ng-template>
    </li>
  </ul>

  <div [ngbNavOutlet]="nav" class="p-2 bg"></div>
</div>